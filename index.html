<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#8A2BE2">
    <title>Binti Health</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/animations.css">
    <link rel="stylesheet" href="css/enhanced-ui.css">
    <link rel="stylesheet" href="css/auth.css">
    <link rel="stylesheet" href="css/device-fixes.css">
    <link rel="stylesheet" href="css/pain-journal.css">
    <link rel="stylesheet" href="css/leak-prevention.css">
    <link rel="stylesheet" href="css/fertility-tracking.css">
    <link rel="stylesheet" href="css/leak-prevention.css">
    <link rel="stylesheet" href="css/pain-journal-entries.css">
    <link rel="stylesheet" href="css/visual-enhancements.css">
    <link rel="stylesheet" href="css/community.css">
    <link rel="stylesheet" href="css/auth.css">
    <link rel="stylesheet" href="css/settings.css">
    <link rel="stylesheet" href="css/dark-mode.css">
    <link rel="stylesheet" href="css/help-support.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="manifest" href="manifest.json">
    <link rel="apple-touch-icon" href="icons/icon-192x192.png">
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <!-- Add to home screen for Safari on iOS -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Binti Health">
</head>
<body>
    <div id="app">
        <!-- Splash Screen -->
        <div id="splash-screen">
            <div class="splash-content">
                <div class="logo-container">
                    <img src="/images/binti-logo.png" alt="Binti International" class="splash-logo">
                </div>
                <h1>Binti Health</h1>
                <div class="loading-indicator">
                    <div class="loading-bar"></div>
                </div>
            </div>
        </div>

        <!-- App Container -->
        <div id="app-container" class="hidden">
            <!-- Header -->
            <header id="app-header">
                <div class="left-actions">
                    <button id="menu-toggle" aria-label="Menu">
                        <i class="fas fa-bars"></i>
                    </button>
                    <img src="images/binti-logo.png" alt="Binti Health" class="header-logo">
                </div>
                <div class="header-title">Binti Health</div>
                <div class="right-actions">
                    <button id="notifications-toggle" aria-label="Notifications">
                        <i class="fas fa-bell"></i>
                    </button>
                    <div class="notification-badge" id="notification-count" style="display: none;">0</div>
                </div>
            </header>

            <!-- Side Navigation Drawer -->
            <div id="side-drawer" class="side-drawer">
                <div class="drawer-header">
                    <div class="user-profile">
                        <div class="user-avatar">
                            <img src="images/avatar-placeholder.jpg" alt="User Profile" id="user-avatar">
                        </div>
                        <div class="user-info">
                            <h3 id="user-name">Guest</h3>
                            <p id="user-membership">Not logged in</p>
                        </div>
                    </div>
                    <button id="close-drawer" aria-label="Close menu">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <nav class="drawer-nav">
                    <a href="#dashboard" class="drawer-item active">
                        <i class="fas fa-home"></i>
                        <span>Dashboard</span>
                    </a>
                    <a href="#period-tracking" class="drawer-item">
                        <i class="fas fa-calendar-alt"></i>
                        <span>Period Tracking</span>
                    </a>
                    <a href="#pain-management" class="drawer-item">
                        <i class="fas fa-heartbeat"></i>
                        <span>Pain Management</span>
                    </a>
                    <a href="#leak-prevention" class="drawer-item">
                        <i class="fas fa-tint-slash"></i>
                        <span>Leak Prevention</span>
                    </a>
                    <a href="#health-insights" class="drawer-item">
                        <i class="fas fa-chart-line"></i>
                        <span>Health Insights</span>
                    </a>
                    <a href="#community" class="drawer-item">
                        <i class="fas fa-users"></i>
                        <span>Community</span>
                    </a>
                    <a href="#device-connection" class="drawer-item">
                        <i class="fas fa-bluetooth-b"></i>
                        <span>Smart Pad Connection</span>
                    </a>
                    <a href="#settings" class="drawer-item">
                        <i class="fas fa-cog"></i>
                        <span>Settings</span>
                    </a>
                    <a href="#help-support" class="drawer-item">
                        <i class="fas fa-question-circle"></i>
                        <span>Help & Support</span>
                    </a>
                </nav>
                <div class="drawer-footer">
                    <p>Binti International &copy; 2025</p>
                    <p>Version 1.0.0</p>
                </div>
            </div>

            <!-- Main Content Area -->
            <main id="main-content">
                <!-- Screen container - all screens go here -->
                <div id="screen-container">
                    <!-- Dashboard Screen -->
                    <section id="dashboard" class="screen active">
                        <!-- Will be populated by JavaScript -->
                    </section>

                    <!-- Period Tracking Screen -->
                    <section id="period-tracking" class="screen">
                        <!-- Will be populated by JavaScript -->
                    </section>

                    <!-- Pain Management Screen -->
                    <section id="pain-management" class="screen">
                        <!-- Will be populated by JavaScript -->
                    </section>
                    
                    <!-- Fertility Tracking Screen -->
                    <section id="fertility-tracking" class="screen">
                        <!-- Will be populated by JavaScript -->
                    </section>

                    <!-- Leak Prevention Screen -->
                    <section id="leak-prevention" class="screen">
                        <!-- Will be populated by JavaScript -->
                    </section>

                    <!-- Health Insights Screen -->
                    <section id="health-insights" class="screen">
                        <!-- Will be populated by JavaScript -->
                    </section>

                    <!-- Community Screen -->
                    <section id="community" class="screen">
                        <!-- Will be populated by JavaScript -->
                    </section>

                    <!-- Smart Pad Connection Screen -->
                    <section id="device-connection" class="screen">
                        <!-- Will be populated by JavaScript -->
                    </section>

                    <!-- Settings Screen -->
                    <section id="settings" class="screen">
                        <!-- Will be populated by JavaScript -->
                    </section>

                    <!-- Help & Support Screen -->
                    <section id="help-support" class="screen">
                        <!-- Will be populated by JavaScript -->
                    </section>
                </div>
            </main>

            <!-- Bottom Navigation Bar -->
            <nav id="bottom-nav">
                <a href="#dashboard" class="nav-item active">
                    <i class="fas fa-home"></i>
                    <span>Home</span>
                </a>
                <a href="#period-tracking" class="nav-item">
                    <i class="fas fa-calendar-alt"></i>
                    <span>Period</span>
                </a>
                <a href="#health-insights" class="nav-item">
                    <i class="fas fa-chart-line"></i>
                    <span>Insights</span>
                </a>
                <a href="#leak-prevention" class="nav-item">
                    <i class="fas fa-tint-slash"></i>
                    <span>Leaks</span>
                </a>
                <a href="#community" class="nav-item">
                    <i class="fas fa-users"></i>
                    <span>Community</span>
                </a>
                <a href="#device-connection" class="nav-item">
                    <i class="fas fa-bluetooth-b"></i>
                    <span>Connect</span>
                </a>
            </nav>

            <!-- Floating Action Button -->
            <button id="fab-button" aria-label="Add entry">
                <i class="fas fa-plus"></i>
            </button>

            <!-- Modal Container -->
            <div id="modal-container" class="modal-hidden">
                <div id="modal-content">
                    <!-- Modal content will be dynamically inserted -->
                </div>
            </div>
        </div>
    </div>

    <!-- Notifications Panel (slides in from right) -->
    <div id="notifications-panel" class="panel right-panel">
        <div class="panel-header">
            <h2>Notifications</h2>
            <button class="close-panel" aria-label="Close notifications">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div class="panel-content" id="notifications-content">
            <div class="empty-state">
                <i class="fas fa-bell-slash" style="font-size: 48px; color: #ccc; margin-bottom: 16px;"></i>
                <p>No notifications yet</p>
            </div>
        </div>
    </div>

    <!-- App Overlay for Drawer/Panels -->
    <div id="app-overlay"></div>

    <!-- Import scripts -->
    <script src="js/api-service.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/modals.js"></script>
    <script src="js/data-loader.js"></script>
    <script src="js/animation-controller.js" defer></script>
    <script src="js/animations.js" defer></script>
    <script src="js/app.js" defer></script>
    <script src="js/ui.js" defer></script>
    <script src="js/components.js" defer></script>
    <script src="js/screens.js" defer></script>
    <script src="js/ble-manager.js" defer></script>
    <script src="js/device-connection.js" defer></script>
    <script src="js/health-insights.js" defer></script>
    <script src="js/pain-management.js" defer></script>
    <script src="js/leak-prevention.js" defer></script>
    <script src="js/fertility-tracking.js" defer></script>
    <script src="js/community.js" defer></script>
    <script src="js/settings.js" defer></script>
    <script src="js/help-support.js" defer></script>
    <script>
        // Emergency failsafe: Hide splash screen after 3 seconds no matter what
        setTimeout(() => {
            const splash = document.getElementById('splash-screen');
            const appContainer = document.getElementById('app-container');
            if (splash && splash.style.visibility !== 'hidden') {
                console.log('ðŸš¨ Emergency failsafe: Hiding splash screen');
                splash.style.display = 'none';
                if (appContainer) {
                    appContainer.classList.remove('hidden');
                }
            }
        }, 3000);
        
        // Register Service Worker for PWA functionality
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('service-worker.js')
                    .then(registration => {
                        console.log('ServiceWorker registered:', registration);
                    })
                    .catch(error => {
                        console.log('ServiceWorker registration failed:', error);
                    });
            });
        }
    </script>
</body>
</html>
